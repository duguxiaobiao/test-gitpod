# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:

  - init: |
      docker run --name test-mysql -e MYSQL_ROOT_PASSWORD=duguxiaobiao  -e MYSQL_DATABASE=test_gitpod -p 3306:3306 -d --restart=always mysql:5.7
      gp sync-done db
    name: startMysql

  - init: |
      docker run -p 6379:6379 --name redis -d --restart=always redis:latest redis-server --appendonly yes --requirepass "123456"
      gp sync-done redis
    name: startRedis

  - init: |
      gp sync-await mysql
      gp sync-await redis
      mvn install -DskipTests=true
      gp sync-done bundle
    name: compileJar

  - init: gp sync-await bundle
    command: java -jar target/*.jar
    name: startServer

vscode:
  extensions:
    - redhat.java
    - vscjava.vscode-java-debug
    - vscjava.vscode-java-test
    - pivotal.vscode-spring-boot
    - gabrielbb.vscode-lombok


# image:
#   file: .gitpod.Dockerfile
